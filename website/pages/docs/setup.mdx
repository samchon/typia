import { Callout, Tabs, Tab } from 'nextra-theme-docs'

## Summary
<Tabs items={['npm', 'pnpm', 'yarn', 'bun']}>
  <Tab>
```bash filename="Terminal" showLineNumbers copy
npm install typia
npx typia setup
```
  </Tab>
  <Tab>
```bash filename="Terminal" showLineNumbers copy
pnpm install typia
pnpm typia setup --manager pnpm
```
  </Tab>
  <Tab>
```bash filename="Terminal" showLineNumbers copy
# YARN BERRY IS NOT SUPPORTED
yarn add typia
yarn typia setup --manager yarn
```
  </Tab>
  <Tab>
```bash filename="Terminal" showLineNumbers copy
bun add typia
bun typia setup --manager bun
```
  </Tab>
</Tabs>

Just run `npx typia setup` command if you're using `tsc`. The setup wizard will do everything. 

By the way, if you use `typia` with bundlers(`vite`, `rollup`, `webpack`, etc), the third party library [`unplugin-typia`](#unplugin-typia) is recommended.

Otherwise non-standard compiler case, only the [generation](#generation) mode is available.

  - Standard Compiler
    - [Microsoft/TypeScript](https://github.com/microsoft/typescript) (`tsc`)
  - Non-standard Compilers
    - [babel](https://babeljs.io/)
    - [esbuild](https://esbuild.github.io/) -> covered by [`unplugin-typia`](#unplugin-typia)
    - [SWC](https://swc.rs)




## Transformation
### Concepts
AOT (Ahead of Time) compilation mode.

When you write a TypeScript code calling `typia.createIs<IMember>()` function and compile it through `tsc` command, `typia` will replace the `typia.createIs<IMember>()` statement to optimal validation code in the compiled JavaScript file, for the `IMember` type. 

This is the transform mode performing AOT (Ahead of Time) compilation.

<Tabs items={['TypeScript Source Code', 'Compiled JavaScript File']}>
  <Tab>
```typescript copy filename="examples/src/check.ts" showLineNumbers {3}
import typia, { tags } from "typia";

export const check = typia.createIs<IMember>();

interface IMember {
  id: string & tags.Format<"uuid">;
  email: string & tags.Format<"email">;
  age: number & tags.ExclusiveMinimum<19> & tags.Maximum<100>;
}
```
  </Tab>
  <Tab>
```javascript filename="examples/bin/check.js" showLineNumbers {2-16}
import typia from "typia";
export const check = (() => {
  const $io0 = (input) =>
    "string" === typeof input.id &&
    /^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i.test(
      input.id,
    ) &&
    "string" === typeof input.email &&
    /^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i.test(
      input.email,
    ) &&
    "number" === typeof input.age &&
    19 < input.age &&
    input.age <= 100;
  return (input) => "object" === typeof input && null !== input && $io0(input);
})();
```
  </Tab>
</Tabs>

### Setup Wizard
<Tabs items={['npm', 'pnpm', 'yarn', 'bun']}>
  <Tab>
```bash filename="Terminal" copy showLineNumbers
npm install --save typia
npx typia setup
```
  </Tab>
  <Tab>
```bash filename="Terminal" copy showLineNumbers
pnpm install --save typia
pnpm typia setup --manager pnpm
```
  </Tab>
  <Tab>
```bash filename="Terminal" copy showLineNumbers
# YARN BERRY IS NOT SUPPORTED
yarn add typia
yarn typia setup --manager yarn
```
  </Tab>
  <Tab>
```bash filename="Terminal" copy showLineNumbers
bun add typia
bun typia setup --manager bun
```
  </Tab>
</Tabs>

You can turn on transformation mode just by running `npx typia setup` command.

Setup wizard would be executed, and it will do everything for the transformation.

### Manual Setup
<Tabs items={['npm', 'pnpm', 'yarn', 'bun']}>
  <Tab>
```bash filename="Terminal" copy showLineNumbers
npm install --save typia
npm install --save-dev typescript ts-patch
```
  </Tab>
  <Tab>
```bash filename="Terminal" copy showLineNumbers
pnpm install --save typia
pnpm install --save-dev typescript ts-patch
```
  </Tab>
  <Tab>
```bash filename="Terminal" copy showLineNumbers
# YARN BERRY IS NOT SUPPORTED
yarn add typia
yarn add -D typescript ts-patch
```
  </Tab>
  <Tab>
```bash filename="Terminal" copy showLineNumbers
bun add typia
bun add -d typescript ts-patch
```
  </Tab>
</Tabs>

If you want to install `typia` manually, just follow the steps.

Firstly install `typia` as a dependency. And then, install `typescript` and `ts-patch` as `devDependencies`.

```json filename="tsconfig.json" copy showLineNumbers
{
  "strict": true,
  "strictNullChecks": true,
  "compilerOptions": {
    "plugins": [
      { "transform": "typia/lib/transform" }
    ]
  }
}
```

Secondly open your `tsconfig.json` file as shown above.

As `typia` generates optimal operation code through transformation, it must be configured as a `plugin`. Also, never forget to configure `strict` (or `strictNullChecks`) to be `true` within your tsconfig.json `compilerOptions`. It is essential option for modern TypeScript development.

```json filename="package.json" copy showLineNumbers {2-4}
{
  "scripts": {
    "prepare": "ts-patch install"
  },
  "dependencies": {
    "typia": "^6.0.6"
  },
  "devDependencies": {
    "ts-patch": "^3.2.0",
    "typescript": "^5.4.5"
  }
}
```

<Tabs items={['npm', 'pnpm', 'yarn', 'bun']}>
  <Tab>
```bash filename="Terminal" copy showLineNumbers
npm run prepare
```
  </Tab>
  <Tab>
```bash filename="Terminal" copy showLineNumbers
pnpm prepare
```
  </Tab>
  <Tab>
```bash filename="Terminal" copy showLineNumbers
# YARN BERRY IS NOT SUPPORTED
yarn prepare
```
  </Tab>
  <Tab>
```bash filename="Terminal" copy showLineNumbers
bun prepare
```
  </Tab>
</Tabs>

Finally open `package.json` file and configure `npm run prepare` command like above.

Be sure to run `npm run prepare` once you have made these changes.

For reference, [`ts-patch`](https://github.com/nonara/ts-patch) is an helper library of TypeScript compiler that supporting custom transformations by plugins. From now on, whenever you run `tsc` command, your `typia` function call statements would be transformed to the optimal operation codes in the compiled JavaScript files.

{/* <br/>
<Alert severity="warning">
  <AlertTitle>
    **`npx typia patch`** 
  </AlertTitle> 

Since TypeScript v5.3 update, `tsc` no more parses `JSDocComment`s. Therefore, `typia` also cannot utilize those `JSDocComment` related features either, especially ["Comment Tags"](./validators/tags/#comment-tags) and ["JSON schema generator"](./json/schema). 

The `npx typia patch` command has been developed to revive the `JSDocComment` parsing feature of `tsc`. It is temporary solution for the TypeScript v5.3 update instead of [`ts-patch`](https://github.com/nonara/ts-patch), and will be disabled after [`ts-patch`](https://github.com/nonara/ts-patch) starts supporting such TypeScript v5.3 update.

Of course, if you don't use any ["Comment Tags"](./validators/tags/#comment-tags) and ["JSON schema generator"](./json/schema), you don't need to run `npx typia patch` command. This is not mandatory command, but just optional command.

</Alert> */}




## Bundlers
### `unplugin-typia`
[`unplugin-typia`](https://jsr.io/@ryoppippi/unplugin-typia) is a plugin to integrate `typia` into your bundlers seamlessly.

Currently, `unplugin-typia` supports the following bundlers:
  - [Bun](https://jsr.io/@ryoppippi/unplugin-typia/doc/bun/~/default)
  - [Esbuild](https://jsr.io/@ryoppippi/unplugin-typia/doc/esbuild/~/default)
  - [Farm](https://jsr.io/@ryoppippi/unplugin-typia/doc/farm/~/default)
  - [Next.js](https://nextjs.org/)
  - [Rolldown](https://jsr.io/@ryoppippi/unplugin-typia/doc/rolldown/~/default)
  - [Rollup](https://jsr.io/@ryoppippi/unplugin-typia/doc/rollup/~/default)
  - [Rspack](https://jsr.io/@ryoppippi/unplugin-typia/doc/rspack/~/default)
  - [Vite](https://jsr.io/@ryoppippi/unplugin-typia/doc/vite/~/default)
  - [Webpack](https://webpack.js.org/)

<Tabs items={['npm', 'pnpm', 'yarn', 'bun']}>
  <Tab>
```bash filename="Terminal" showLineNumbers copy
npx jsr add -D @ryoppippi/unplugin-typia # via jsr (recommended)
# npm install -D @ryoppippi/unplugin-typia # via npm

npm install --save typia
npx typia setup
```
 </Tab>
  <Tab>
```bash filename="Terminal" showLineNumbers copy
pnpm dlx jsr add -D @ryoppippi/unplugin-typia
pnpm install typia
pnpm typia setup --manager pnpm
```
  </Tab>
  <Tab>
```bash filename="Terminal" showLineNumbers copy
# YARN BERRY IS NOT SUPPORTED
yarn dlx jsr add -D @ryoppippi/unplugin-typia
yarn add typia
yarn typia setup --manager yarn
```
  </Tab>
  <Tab>
```bash filename="Terminal" showLineNumbers copy
bunx jsr add @ryoppippi/unplugin-typia
bun add typia
bun typia setup
```
  </Tab>
</Tabs>

At first, install both `unplugin-typia` and `typia`, with `npx typia setup` command.

After that, follow the next section steps to integrate `unplugin-typia` into your bundlers.

For reference, there are a couple of ways to integrate `unplugin-typia` into your bundlers. For the full integration guide, please refer to the [`unplugin-typia` documentation](https://jsr.io/@ryoppippi/unplugin-typia/doc). Also, you can see the examples projects in [`unplugin-typia` repository](https://github.com/ryoppippi/unplugin-typia/tree/main/examples).

<Tabs items={['Vite', 'Next.js', 'esbuild', 'Bun.runtime', 'Bun.build']}>
  <Tab>
  <Callout type="info">
  You can use any plugins with [`unplugin-typia`](#unplugin-typia) in Vite (including [`@vitejs/plugin-react-swc`](https://github.com/vitejs/vite-plugin-react-swc)).
  `unplugin-typia` processes the TypeScript code before transforming it to JavaScript, so it can be used with any plugins.
  </Callout>
```typescript filename="vite.config.ts" copy showLineNumbers
import UnpluginTypia from '@ryoppippi/unplugin-typia/vite'
 
export default defineConfig({
  plugins: [
    UnpluginTypia({ /* options */ })
  ],
})
```
  </Tab>
  <Tab>
```javascript filename="next.config.mjs" copy showLineNumbers
import unTypiaNext from "@ryoppippi/unplugin-typia/next";
 
/** @type {import('next').NextConfig} */
const config = {
  // your next.js config
};
export default unTypiaNext(
  config,
  {} // options of unplugin-typia
);
```
  </Tab>
  <Tab>
```javascript filename="esbuild.config.js" copy showLineNumbers
import { build } from 'esbuild'
import UnpluginTypia from '@ryoppippi/unplugin-typia/esbuild';
 
build({
  plugins: [
    UnpluginTypia({ /* options */ }),
  ],
});
```
  </Tab>
  <Tab>
First, create a `preload.ts` file and add the following code.

```typescript filename="preload.ts" copy showLineNumbers
import { plugin } from 'bun';
import UnpluginTypia from '@ryoppippi/unplugin-typia/bun'

plugin(UnpluginTypia({ /* options */ }))
```
Then, add the `preload` option to your `bunfig.toml` file.

```typescript filename="bunfig.toml" copy showLineNumbers {1, 4}
preload = ["./preload.ts"]

[test]
preload = ["./preload.ts"]
```
And, run the `bun run` command.


```bash filename="Terminal" showLineNumbers copy
bun run index.ts
```
For more details, please refer to the [`unplugin-typia` documentation](https://jsr.io/@ryoppippi/unplugin-typia).
  </Tab>
  <Tab>

```typescript filename="Build.ts" copy showLineNumbers
import UnpluginTypia from '@ryoppippi/unplugin-typia/bun'

await Bun.build({
	entrypoints: ["./index.ts"],
	outdir: "./out",
	plugins: [UnpluginTypia(/* options */)]
});
```

For more details, please refer to the [`unplugin-typia` documentation](https://jsr.io/@ryoppippi/unplugin-typia).
  </Tab>
</Tabs>




### webpack
<Callout type="info">
[`unplugin-typia`](#unplugin-typia) also supports `webpack` as well.
</Callout>

<Tabs items={['npm', 'pnpm', 'yarn', 'bun']}>
  <Tab>
```bash filename="Terminal" copy showLineNumbers
# TYPIA
npm install typia
npx typia setup

# WEBPACK + TS-LOADER
npm install --save-dev ts-loader
npm install --save-dev webpack webpack-cli
```
  </Tab>
  <Tab>
```bash filename="Terminal" copy showLineNumbers
# TYPIA
pnpm install typia
pnpm typia setup --manager pnpm

# WEBPACK + TS-LOADER
pnpm install --save-dev ts-loader
pnpm install --save-dev webpack webpack-cli
```
  </Tab>
  <Tab>
```bash filename="Terminal" copy showLineNumbers
###########################################
# YARN BERRY IS NOT SUPPORTED
###########################################
# TYPIA
yarn add typia
yarn typia setup --manager yarn

# WEBPACK + TS-LOADER
yarn add -D ts-loader
yarn add -D webpack webpack-cli
```
  </Tab>
  <Tab>
    ```bash filename="Terminal" copy showLineNumbers
# TYPIA
bun add typia
bun typia setup

# WEBPACK + TS-LOADER
bun add -d ts-loader
bun add -d webpack webpack-cli
```
  </Tab>
</Tabs>

When you're using `webpack` as a bundler, you can still utilize the [transformation](#transformation) mode.

Just install `ts-loader` as well as `webpack`, and configure `webpack.config.js` file like below.

```javascript filename="webpack.config.js" copy showLineNumbers {20-24}
const path = require("path");
const nodeExternals = require("webpack-node-externals");

module.exports = {
  // CUSTOMIZE HERE
  entry: ["./src/index.tsx"],
  output: {
    path: path.join(__dirname, "dist"),
    filename: "index.js",
  },
  optimization: {
    minimize: false,
  },

  // JUST KEEP THEM
  mode: "development",
  target: "node",
  module: {
    rules: [
      {
        test: /\.ts$/,
        exclude: /node_modules/,
        loader: "ts-loader",
      },
    ],
  },
  resolve: {
    extensions: [".tsx", ".ts", ".js"],
  },
};
```

From now on, you can build the single JS file just by running the `npx webpack` command. By the way, when removing `devDependencies` for `--production` install, never forget to add the `--ignore-scripts` option to prevent the `prepare` script.

<Tabs items={['npm', 'pnpm', 'yarn', 'bun']}>
  <Tab>
```bash filename="Terminal" copy showLineNumbers
npx webpack
npm ci --omit=dev --ignore-scripts
```
  </Tab>
  <Tab>
```bash filename="Terminal" copy showLineNumbers
pnpm webpack
pnpm install --production --ignore-scripts
```
  </Tab>
  <Tab>
```bash filename="Terminal" copy showLineNumbers
yarn webpack
rm -rf node_modules
yarn install --production --ignore-scripts --immutable
```
  </Tab>
  <Tab>
```bash filename="Terminal" copy showLineNumbers
bun webpack
bun install --production --ignore-scripts
```
  </Tab>
</Tabs>

Additionally, if you're using `typia` in the NodeJS project especially for the backend development, *Setup Guide Documents* of [`nestia`](https://github.com/samchon/nestia) would be helpful. Even though you're not using NestJS, you can still utilize below documents, and "Single JS file only" mode would be especially helpful for you.

  - [Nestia > Setup > Webpack](https://nestia.io/docs/setup/#webpack)
    - [With `node_modules`](https://nestia.io/docs/setup/#with-node_modules)
    - [Single JS file only](https://nestia.io/docs/setup/#single-js-file-only)




### NX
<Tabs items={['npm', 'pnpm', 'yarn', 'bun']}>
  <Tab>
```bash filename="Terminal" copy showLineNumbers
npm install --save typia
npx typia setup
```
  </Tab>
  <Tab>
```bash filename="Terminal" copy showLineNumbers
pnpm install --save typia
pnpm typia setup --manager pnpm
```
  </Tab>
  <Tab>
```bash filename="Terminal" copy showLineNumbers
# YARN BERRY IS NOT SUPPORTED
yarn add typia
yarn typia setup --manager yarn
```
  </Tab>
  <Tab>
```bash filename="Terminal" copy showLineNumbers
bun add typia
bun typia setup --manager bun
```
    </Tab>
</Tabs>

After install `typia` like above, you have to modify `project.json` on each app like below.

```javascript filename="project.json" showLineNumbers copy
 "targets": {
    "build": {
      ...
      "options": {
        ...
        "target": "node",
        "compiler": "tsc",
        "transformers": [
          "typia/lib/transform",
        ]
      }
    },
    ...
 }
```




## Generation
<Tabs items={['npm', 'pnpm', 'yarn', 'bun']}>
  <Tab>
```bash filename="Terminal" copy showLineNumbers
# INSTALL TYPIA
npm install --save typia
npm install --save-dev typescript

# GENERATE TRANSFORMED TYPESCRIPT CODES
npx typia generate \
  --input src/templates \
  --output src/generated \
  --project tsconfig.json
```
  </Tab>
  <Tab>
```bash filename="Terminal" copy showLineNumbers
# INSTALL TYPIA
pnpm install --save typia
pnpm install --save-dev typescript

# GENERATE TRANSFORMED TYPESCRIPT CODES
pnpm typia generate \
  --input src/templates \
  --output src/generated \
  --project tsconfig.json
```
  </Tab>
  <Tab>
```bash filename="Terminal" copy showLineNumbers
# INSTALL TYPIA
yarn add typia
yarn add -D typescript

# GENERATE TRANSFORMED TYPESCRIPT CODES
yarn typia generate \
  --input src/templates \
  --output src/generated \
  --project tsconfig.json
```
  </Tab>
  <Tab>
```bash filename="Terminal" copy showLineNumbers
# INSTALL TYPIA
bun add typia
bun add -d typescript
bun typia generate \
  --input src/templates \
  --output src/generated \
  --project tsconfig.json
```
  </Tab>
</Tabs>

For frontend projects.

If you are using a non-standard TypeScript compiler such as the following, you will need to fall back to [generation](#generation) mode

  - Non-standard TypeScript compilers:
    - [Babel](https://babeljs.io/) in Create-React-App
    - [esbuild](https://esbuild.github.io/) in Vite -> covered by [`unplugin-typia`](#unplugin-typia)
    - [SWC](https://swc.rs/) -> use [`unplugin-typia`](#unplugin-typia) with your bundlers ( including `next.js`, `vite`, `webpack`, `rollup`, etc )

Instead you should utilise the generation mode. 

Install `typia` through `npm install` command, and run `typia generate` command. Then, generator of `typia` reads your TypeScript codes of `--input`, and writes transformed TypeScript files into the `--output` directory, like below.

For clarification, the input directory should contain one or more TypeScript files which define how you want to verify your associated type assertions. Commonly you will import your TypeScript type, then export a function which validates that type. See below.

If you want to specify other TypeScript project file instead of `tsconfig.json`, you can use `--project` option.

<Tabs items={['TypeScript Source Code', 'Generated TypeScript File']}>
  <Tab>
```typescript copy filename="examples/src/templates/check.ts" showLineNumbers {5}
import typia from "typia";

import { IMember } from "../structures/IMember";

export const check = typia.createIs<IMember>();
```
  </Tab>
  <Tab>
```typescript copy filename="examples/src/generated/check.ts" showLineNumbers {3-13}
import typia from "typia";
import { IMember } from "../structures/IMember";
export const check = (input: any): input is IMember => {
  const $is_uuid = (typia.createIs as any).is_uuid;
  const $is_email = (typia.createIs as any).is_email;
  return (
    "object" === typeof input &&
    null !== input &&
    "string" === typeof input.id &&
    $is_uuid(input.id) &&
    "string" === typeof input.email &&
    $is_email(input.email) &&
    "number" === typeof input.age &&
    19 <= input.age &&
    100 >= input.age
  );
};
```
  </Tab>
</Tabs>

<Callout type="error">
**Why not support non-standard compilers?**

Non-standard TypeScript compilers are removing every type informations, and skipping type checkings for rapid compilation. By the way, without those type informations, `typia` can't do anything. This is the reason why `typia` doesn't support non-standard TypeScript compilers.
</Callout>
